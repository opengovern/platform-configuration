Description: ''
ID: kubernetes_clusters
IntegrationTypeName:
- aws_cloud_account
- azure_subscription
Query:
  Engine: CloudQL-v0.0.1
  ListOfTables: []
  Parameters: []
  PrimaryTable: null
  QueryToExecute: "select c.name as cloud_account_name, c.id as _discovered_provider_id,\
    \ t.* from (\n(select \n  'AWS' as provider, \n  r.name as name, \n  r.region\
    \ as location, \n  jsonb_path_query(r.description, '$.Cluster.Tags') as _tags,\n\
    \  r.connection_id as _og_connection_id,\n  r.resource_id as _resource_id,\n \
    \ r.resource_type as _resource_type,\n  jsonb_path_query(r.description, '$.Cluster.PlatformVersion')\
    \ as kubernetes_version,\n  r.created_at as _last_discovered\nfrom \n  og_resources\
    \ r\nwhere \n  resource_type = 'aws::eks::cluster') \n\nunion \n\n(select \n \
    \ 'Azure' as provider, \n  r.name as vm_name, \n  r.region as location, \n  jsonb_path_query(r.description,\
    \ '$.ManagedCluster.Tags') as _tags,\n  r.connection_id as _og_connection_id,\n\
    \  r.resource_id as _resource_id,\n  r.resource_type as _resource_type,\n  jsonb_path_query(r.description,\
    \ '$.ManagedCluster.Properties.KubernetesVersion') as kubernetes_version,\n  r.created_at\
    \ as _last_discovered\nfrom \n  og_resources r \nwhere \n  resource_type = 'microsoft.containerservice/managedclusters')\n\
    \n) as t inner join og_connections c on t._og_connection_id = c.og_id "
Tags:
  cloud_asset_management:
  - 'true'
  cloud_provider:
  - aws
  - azure
  cloud_service:
  - Kubernetes
Title: List All Kubernetes Clusters with Details
