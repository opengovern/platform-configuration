Description: Allows users to query AWS SSO Admin Account Assignments. This table provides
  information about each AWS SSO admin account assignment within an AWS account.
ID: aws_ssoadmin_account_assignment_2
IntegrationTypeName:
- aws_cloud
Query:
  Engine: CloudQL-v0.0.1
  ListOfTables: []
  Parameters: []
  PrimaryTable: null
  QueryToExecute: "with aws_ssoadmin_principal as\n(\n  select\n    i.arn as instance_arn,\n\
    \    'GROUP' as \"type\",\n    g.id,\n    g.title\n  from\n    aws_ssoadmin_instance\
    \ i\n    left join\n      aws_identitystore_group g\n      on i.identity_store_id\
    \ = g.identity_store_id\n    union\n    select\n      i.arn as instance_arn,\n\
    \      'USER' as \"type\",\n      u.id,\n      u.title\n    from\n      aws_ssoadmin_instance\
    \ i\n      left join\n        aws_identitystore_user u\n        on i.identity_store_id\
    \ = u.identity_store_id\n)\nselect\n  a.target_account_id,\n  a.principal_type,\n\
    \  p.title as principal_title\nfrom\n  aws_ssoadmin_account_assignment a\n  left\
    \ join\n    aws_ssoadmin_principal p\n    on a.principal_type = p.type\n    and\
    \ a.principal_id = p.id\n    and a.instance_arn = p.instance_arn\nwhere\n  a.target_account_id\
    \ = '012345678901' and a.permission_set_arn = 'arn:aws:sso:::permissionSet/ssoins-0123456789abcdef/ps-0123456789abcdef';"
Tags:
  cloud_identity_security:
  - 'true'
  cloud_provider:
  - aws
  cloud_service:
  - SSO Admin
Title: Find All AWS SSO Admin Account Assignments with SQL
