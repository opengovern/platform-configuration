id: "kubernetes-plugin-describer"
name: "Kubernetes Plugin Describer"
description: "Kubernetes Plugin Describer"
is_enabled: true
image_url: "ghcr.io/opengovern/og-describer-kubernetes:local-v0.6.31"
artifacts_url: "https://github.com/opengovern/plugin-kubernetes/releases/download/v0.6.31/kubernetes-plugin.zip"
steampipe_plugin_name: "steampipe-plugin-kubernetes"
command: "/og-describer-kubernetes"
timeout: "120m"
scale_config:
  lag_threshold: "1"
  min_replica: 0
  max_replica: 5
params: ["integrations_query", "resource_types_query"]
configs: []
run_schedule:
  - id: "describe-clusters"
    params:
      "integrations_query": "SELECT i.*, c.secret FROM platform_integrations AS i LEFT JOIN platform_integrations_credentials AS c ON i.integration_id = c.integration_id WHERE i.integration_type = 'kubernetes' AND c.secret IS NOT NULL;"
      "resource_types_query": "SELECT * FROM platform_integration_resource_types WHERE integration_type = 'kubernetes' AND resource_type = 'Kubernetes/Cluster';"
    frequency: "1d"
