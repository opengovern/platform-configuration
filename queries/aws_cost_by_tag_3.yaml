Description: Allows users to query AWS Cost Explorer to obtain cost allocation tags
  and associated costs.
ID: aws_cost_by_tag_3
IntegrationTypeName:
- aws_cloud
Query:
  Engine: CloudQL-v0.0.1
  ListOfTables: []
  Parameters: []
  PrimaryTable: null
  QueryToExecute: "with ranked_costs as\n(\n  select\n    tag_key_1,\n    tag_value_1,\n\
    \    period_start,\n    unblended_cost_amount::numeric::money,\n    rank() over(partition\
    \ by tag_key_1\n  order by\n    unblended_cost_amount desc)\n  from\n    aws_cost_by_tag\n\
    \  where\n    granularity = 'DAILY'\n    and tag_key_1 = 'Name'\n)\nselect\n \
    \ *\nfrom\n  ranked_costs\nwhere\n  rank <= 10;"
Tags:
  cloud_asset_management:
  - 'true'
  cloud_finops:
  - 'true'
  cloud_provider:
  - aws
  cloud_service:
  - Cost Explorer
Title: List Top 10 AWS Costs by Tag Using SQL
